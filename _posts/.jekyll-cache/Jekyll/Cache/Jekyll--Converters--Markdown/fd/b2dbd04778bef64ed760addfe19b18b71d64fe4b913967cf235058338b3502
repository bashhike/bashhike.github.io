I"M<p>This article lists down the steps to follow in order to setup OpenNI on ROS Indigo. After trying various versions of different libraries and settings, this is what ended up working for me. Note that this has only been tested in Ubuntu 14.04 64 bit with ROS Indigo and Microsoft Kinect 360. It is assumed that you already have <a href="http://wiki.ros.org/indigo/Installation/Ubuntu">ROS Indigo</a> installed.</p>

<p>First we have to install some peripheral Libraries:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>git-core cmake freeglut3-dev pkg-config build-essential libxmu-dev libxi-dev  libusb-1.0-0-dev openjdk-6-jdk doxygen graphviz mono-complete
</code></pre></div></div>

<h3 id="openni">OpenNI</h3>
<p>Download the OpenNI package</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/kinect
<span class="nb">cd</span> ~/kinect
git clone https://github.com/OpenNI/OpenNI.git
</code></pre></div></div>

<p>Compile the package using the Redist-System:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>OpenNI/Platform/Linux/CreateRedist/
<span class="nb">chmod</span> +x RedistMaker
./RedistMaker
</code></pre></div></div>
<p>And install it:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>Final
<span class="nb">tar</span> <span class="nt">-xjf</span> OpenNI-Bin-Dev-Linux-x64-v1.5.7.10.tar.bz2
<span class="nb">cd </span>OpenNI-Bin-Dev-Linux-x64-v1.5.7.10
<span class="nb">sudo</span> ./install.sh
</code></pre></div></div>

<h3 id="sensorkinect">SensorKinect</h3>
<p>This part is similar to the installation of OpenNI package.</p>

<p>Download the package:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~kinect/
git clone git://github.com/ph4m/SensorKinect.git
</code></pre></div></div>
<p>Compile package using Redist-System:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>SensorKinect/Platform/Linux/CreateRedist/
<span class="nb">chmod</span> +x RedistMaker
./RedistMaker
</code></pre></div></div>
<p>Installation:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>Final
<span class="nb">tar</span> <span class="nt">-xjf</span> Sensor-Bin-Linux-x64-v5.1.2.1.tar.bz2
<span class="nb">cd </span>Sensor-Bin-Linux-x64-v5.1.2.1
<span class="nb">sudo</span> ./install.sh
</code></pre></div></div>

<h3 id="nite">NITE</h3>

<p>Please note that only the Versions NITE v1.5.2.21 and NITE v1.5.2.23 will work for you. Paste the nite-folder into your kinect-folder to keep track of your data:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~kinect/nite/
<span class="nb">tar</span> <span class="nt">-xjf</span> NITE-Bin-Dev-Linux-x64-v1.5.2.23.tar.bz2
<span class="nb">cd </span>NITE-Bin-Dev-Linux-x64-v1.5.2.23
<span class="nb">sudo</span> ./install.sh
</code></pre></div></div>

<p>Now that everything around ROS is installed, we should reboot the system:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot
</code></pre></div></div>

<h3 id="ros-components">ROS Components</h3>

<p>After all peripheral Libraries have been installed, we can install the required ros-core-components for OpenNI-usage. But we have to delete one library before that because of some issues that will appear otherwise:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get remove libopenni-sensor-pointclouds0
</code></pre></div></div>

<p>Next is the installation of ROS-Kinect Driver:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-indigo-openni-launch
<span class="nb">sudo </span>apt-get <span class="nb">install </span>ros-indigo-openni-camera
</code></pre></div></div>

<p>Finally we can install the openni_tracker to our usual workspace (e.g.catkin_ws):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~catkin_ws/src
git clone https://github.com/ros-drivers/openni_tracker.git 
<span class="nb">cd</span> ..
catkin_make
</code></pre></div></div>

<p>Now that the OpenNI tracker is installed, youâ€™ll be able to track skeleton of a person and view it in Rviz. Open up a bunch of terminals and run the following commands.</p>
<ul>
  <li><strong>Terminal 1</strong>: <code class="language-plaintext highlighter-rouge">roslaunch openni_launch openni.launch</code></li>
  <li><strong>Terminal 2</strong>: <code class="language-plaintext highlighter-rouge">roslaunch openni_tracker openni_tracker</code></li>
  <li><strong>Terminal 3</strong>: <code class="language-plaintext highlighter-rouge">rosrun rviz rviz</code></li>
</ul>

<p>To view the skeleton frame in Rviz, set the base link from <code class="language-plaintext highlighter-rouge">map</code> to <code class="language-plaintext highlighter-rouge">openni_depth_frame</code> and add a TF component.</p>

<p>Thanks to <a href="https://github.com/BastiAB">Don Bastiano</a> for coming up with this.</p>
:ET